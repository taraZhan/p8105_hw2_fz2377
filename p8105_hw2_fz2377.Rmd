---
title: "Homework 2"
author: "Tara Zhan"
data: 09-26-2023
output: github_document
---

```{r}
library(moderndive)
library(tidyverse)
library(readxl)
library(haven)
library(readxl)
library(dplyr)
```

# Problem 1

Read three CSV files:

```{r}
pols <- read.csv("fivethirtyeight_datasets/pols-month.csv")
snp <- read.csv("fivethirtyeight_datasets/snp.csv")
unemployment <- read.csv("fivethirtyeight_datasets/unemployment.csv")
```

First, clean the data in 'pols-month.csv'.

```{r}
pols_cleaned <- pols %>%
  # Separate the `mon` column into `year`, `month`, and `day`
  separate(mon, into = c("year", "month", "day"), sep = "-", convert = TRUE) %>%
  # Replace month number with month name
  mutate(month = month.abb[as.numeric(month)]) %>%
  # Create a `president` variable
  mutate(president = ifelse(!is.na(prez_dem), "dem", ifelse(!is.na(prez_gop), "gop", NA))) %>%
  # Remove `prez_dem`, `prez_gop`, `day` variables
  select(-day, -prez_dem, -prez_gop)
```

**pols_cleaned/(pols-month.csv)**: This dataset describes the voting rate of presidents from 1947 to 2015. The cleaned version contains variables like 'year', 'month', 'political party of the president' that either Democratic ('dem') or republican ('gop').

Second, clean the data in 'snp.csv'

```{r}
snp_cleaned <- snp %>%
  # Separate the `date` column into `year`, `month`, and `day'
  separate(date, into = c("month", "day", "year"), sep = "/", convert = TRUE) %>%
  # Replace month number with month name
  mutate(month = month.abb[as.numeric(month)]) %>%
  # Arrange the data by year and month
  arrange(year, month) %>%
  # Organize 'year' and 'month' are the leading columns
  select(year, month, everything(), -day)
```

**snp_cleaned/(snp.csv)**: This dataset describes the stock market indexes over time. The cleaned version arranged data chronologically by 'year' and 'month', making the dataset easier to read. It also contains 'close' values.

Third, tidy the 'unemployment.csv' then merged with the previous datasets

```{r}
unemployment_long <- unemployment %>%
  #convert from wide to long format
  gather(key = "month", value = "unemployment_rate", -Year)
unemployment_long <- unemployment_long %>%
  rename(year = Year)
```

**unemployment_cleaned/(unemployment.csv)**: This dataset describes unemployment rates in each months from 1948 to 2015. The tidying version convert the dataset from wide to long format, making it easier to merge with other datasets. It also contains 'unemployment rate' values.

Merging 'snp' into 'pols', and merging 'unemployment' into the result.

```{r}
combined_data <- pols_cleaned %>%
  # Merge 'snp' into 'pols'
  left_join(snp_cleaned, by = c("year", "month")) %>%
  # Merge 'unemployment'
  left_join(unemployment_long, by = c("year", "month"))
```

**combined_data:** 
This is a combination of three above cleaned version datasets based on the 'year' and 'month'. This combined dataset describes an outlook of political, economic, and unemployment rates from year 1948 to year 2015. This combined_data has 11 columns, 822 rows, and spans from the year 1947 to 2015. Key variables in this dataset include: year, month, gov_gop, sen_gop, rep_gop, gov_dem, sen_dem, rep_dem, president, close, unemployment_rate.  
```{r, echo=FALSE}
print(str(combined_data))
ncol(combined_data)
nrow(combined_data)
min(combined_data$year)
max(combined_data$year)
paste(names(combined_data), collapse=", ")
```

# Problem 2
```{r}
trash_wheel <- read_excel("trash_wheel_collection.xlsx")
```


# Problem 3
